"use strict";(function(){"use strict";if(!("BroadcastChannel"in window))return;const c=window.SteamDB,a=0,t=1,r=2,l=parseInt(document.querySelector(".scope-app").dataset.appid,10),n=document.getElementById("js-extension-wishlist"),s=document.getElementById("js-extension-follow"),i=document.getElementById("js-extension-ignore");let d=a,f=a,g=a,h=!1;c.OnExtensionUserdataLoaded(()=>{c.OwnedApps.has(l)?n&&n.remove():c.WishedApps.has(l)&&p(t),c.FollowedApps.has(l)&&u(t),c.IgnoredApps.has(l)&&b(t),h=!0,n&&(n.setAttribute("aria-label",`Wishlist on the Steam Store
via browser extension`),n.classList.remove("disabled")),s&&(s.setAttribute("aria-label",`Follow on the Steam Store
via browser extension`),s.classList.remove("disabled")),i&&(i.setAttribute("aria-label",`Ignore on the Steam Store
via browser extension`),i.classList.remove("disabled"))}),n&&n.addEventListener("click",e=>{h&&(e.preventDefault(),d!==r&&(w(n),S(d===t?"StoreWishlistRemove":"StoreWishlistAdd"),d=r))}),s&&s.addEventListener("click",e=>{h&&(e.preventDefault(),f!==r&&(w(s),S(f===t?"StoreUnfollow":"StoreFollow"),f=r))}),i&&i.addEventListener("click",e=>{h&&(e.preventDefault(),g!==r&&(w(i),S(g===t?"StoreUnignore":"StoreIgnore"),g=r))});function w(e){e.innerHTML='<span class="loader"></span>'}function S(e){window.postMessage({type:"steamdb:extension-query",contentScriptQuery:e,appid:l},window.location.origin)}function p(e){d=e,n&&(n.classList.toggle("wished",e===t),n.textContent=e===t?"Remove from wishlist":"Wishlist")}function u(e){f=e,s&&(s.classList.toggle("followed",e===t),s.textContent=e===t?"Unfollow":"Follow")}function b(e){g=e,i&&(i.classList.toggle("ignored",e===t),i.textContent=e===t?"Unignore":"Ignore")}function m(e){const o=document.getElementById("js-watch");o.classList.toggle("watched",e===t),o.dataset.watched=(e===t).toString()}try{new BroadcastChannel("steamdb-extension").addEventListener("message",o=>{if(!(!o||o.origin!==window.location.origin)&&o.data&&o.data.type==="steamdb:extension-response"){if(!o.data.response||!o.data.response.success||o.data.request.appid!==l)return;switch(o.data.request.contentScriptQuery){case"StoreWishlistAdd":p(t);break;case"StoreWishlistRemove":p(a);break;case"StoreFollow":u(t);break;case"StoreUnfollow":u(a);break;case"StoreIgnore":b(t);break;case"StoreUnignore":b(a);break;case"Watch":m(t);break;case"Unwatch":m(a);break}}})}catch{}})();
