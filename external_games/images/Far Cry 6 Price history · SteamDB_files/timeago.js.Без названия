"use strict";class TimeAgo{static cssTooltip=!0;static#e=new Date().toLocaleDateString("en-GB",{day:"2-digit",timeZoneName:"short"}).substring(4);static#a=new Intl.RelativeTimeFormat("en",{numeric:"auto"});static#n=new Intl.DateTimeFormat("en-GB",{dateStyle:"long",timeZone:"UTC"});static#o=new Intl.DateTimeFormat("en-GB",{dateStyle:"long"});static#s=new Intl.DateTimeFormat("en-GB",{dateStyle:"long",timeStyle:"medium",hourCycle:"h23",timeZone:"UTC"});static#r=new Intl.DateTimeFormat("en-GB",{dateStyle:"long",timeStyle:"medium",hourCycle:"h23"});static#t(e,t,i){let a=0;switch(i){case"second":a=1e3;break;case"minute":a=60100;break;case"hour":a=61e3;break;case"day":a=602e3;break}return i==="year"?t=Math.round(t*10)/10:t=Math.round(t),e||(t=-t),{refresh:a,textContent:this.#a.format(t,i)}}static#l(e){let t=new Date,i=t.getTime()-e,a=!1;i<0&&(i=-i,a=!0);const o=i/1e3;if(o<60)return this.#t(a,o,"second");const n=o/60;if(n<60)return this.#t(a,n,"minute");const l=n/60;if(l<24)return this.#t(a,l,"hour");const c=l/24;if(c<31)return this.#t(a,c,"day");let s=new Date(e);a&&([s,t]=[t,s]);let r=(t.getFullYear()-s.getFullYear())*12;if(r+=t.getMonth()-s.getMonth(),r<18)return this.#t(a,r,"month");const h=r/12;return this.#t(a,h,"year")}static datetime(e){return new Date(this.#c(e)?e.dateTime:e.dataset.time)}static#c(e){return e instanceof RelativeTime||e instanceof HTMLTimeElement}static init(e){const t=e,i=this.datetime(t);t._timeago=i;let a;i.valueOf()%864e5===0?a=this.#n.format(i)+` UTC
`+this.#o.format(i)+" "+this.#e:a=this.#s.format(i)+` UTC
`+this.#r.format(i)+" "+this.#e,this.cssTooltip?(t.setAttribute("aria-label",a),t.classList.add("tooltipped","tooltipped-n"),t.addEventListener("pointerenter",this.#m,{passive:!0})):t.title=a,this.#i(t)}static#m(e){const t=e.target;if(!(t instanceof Element))return;const i=t.getBoundingClientRect(),a=document.documentElement.clientWidth,o=i.left+i.width/2;let n="tooltipped-n";o<150&&(n="tooltipped-ne"),(a-o<150||t.classList.contains("future-sale-time"))&&(n="tooltipped-nw"),t.classList.contains(n)||(t.classList.remove("tooltipped-n","tooltipped-nw","tooltipped-ne"),t.classList.add(n))}static#i(e){e._timeagoInterval&&clearTimeout(e._timeagoInterval);const t=e._timeago.getTime(),i=this.#l(t);e.textContent=i.textContent,i.refresh&&(e._timeagoInterval=setTimeout(()=>{if(!document.documentElement.contains(e)){e._timeago=null,e._timeagoInterval=null;return}this.#i(e)},i.refresh))}}class RelativeTime extends HTMLElement{_timeago=null;_timeagoInterval=0;#e=this.shadowRoot?this.shadowRoot:this.attachShadow?this.attachShadow({mode:"open"}):this;get dateTime(){return this.getAttribute("datetime")}get textContent(){return this.#e.textContent}set textContent(e){this.#e.textContent=e}connectedCallback(){TimeAgo.init(this)}disconnectedCallback(){this._timeagoInterval>0&&clearTimeout(this._timeagoInterval)}}customElements.define("relative-time",RelativeTime);
