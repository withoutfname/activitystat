"use strict";/*!
* Diff Match and Patch
* Copyright 2018 The diff-match-patch Authors.
* https://github.com/google/diff-match-patch
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/(function(){"use strict";const c=function(){this.Diff_Timeout=1,this.Diff_EditCost=4};c.Diff=function(e,n){this[0]=e,this[1]=n},c.Diff.prototype.length=2,c.Diff.prototype.toString=function(){return this[0]+","+this[1]},c.prototype.diff_main=function(e,n,l,i){typeof i>"u"&&(this.Diff_Timeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.Diff_Timeout*1e3);const s=i;if(e===null||n===null)throw new Error("Null input. (diff_main)");if(e===n)return e?[new c.Diff(0,e)]:[];typeof l>"u"&&(l=!0);const t=l;let r=this.diff_commonPrefix(e,n);const h=e.substring(0,r);e=e.substring(r),n=n.substring(r),r=this.diff_commonSuffix(e,n);const o=e.substring(e.length-r);e=e.substring(0,e.length-r),n=n.substring(0,n.length-r);const a=this.diff_compute_(e,n,t,s);return h&&a.unshift(new c.Diff(0,h)),o&&a.push(new c.Diff(0,o)),this.diff_cleanupMerge(a),a},c.prototype.diff_compute_=function(e,n,l,i){let s;if(!e)return[new c.Diff(1,n)];if(!n)return[new c.Diff(-1,e)];const t=e.length>n.length?e:n,r=e.length>n.length?n:e,h=t.indexOf(r);if(h!==-1)return s=[new c.Diff(1,t.substring(0,h)),new c.Diff(0,r),new c.Diff(1,t.substring(h+r.length))],e.length>n.length&&(s[0][0]=s[2][0]=-1),s;if(r.length===1)return[new c.Diff(-1,e),new c.Diff(1,n)];const o=this.diff_halfMatch_(e,n);if(o){const a=o[0],g=o[1],u=o[2],f=o[3],p=o[4],b=this.diff_main(a,u,l,i),I=this.diff_main(g,f,l,i);return b.concat([new c.Diff(0,p)],I)}return l&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},c.prototype.diff_lineMode_=function(e,n,l){const i=this.diff_linesToChars_(e,n);e=i.chars1,n=i.chars2;const s=i.lineArray,t=this.diff_main(e,n,!1,l);this.diff_charsToLines_(t,s),this.diff_cleanupSemantic(t),t.push(new c.Diff(0,""));let r=0,h=0,o=0,a="",g="";for(;r<t.length;){switch(t[r][0]){case 1:o++,g+=t[r][1];break;case-1:h++,a+=t[r][1];break;case 0:if(h>=1&&o>=1){t.splice(r-h-o,h+o),r=r-h-o;const u=this.diff_main(a,g,!1,l);for(let f=u.length-1;f>=0;f--)t.splice(r,0,u[f]);r+=u.length}o=0,h=0,a="",g="";break}r++}return t.pop(),t},c.prototype.diff_bisect_=function(e,n,l){const i=e.length,s=n.length,t=Math.ceil((i+s)/2),r=t,h=2*t,o=new Array(h),a=new Array(h);for(let m=0;m<h;m++)o[m]=-1,a[m]=-1;o[r+1]=0,a[r+1]=0;const g=i-s,u=g%2!==0;let f=0,p=0,b=0,I=0;for(let m=0;m<t&&!(Date.now()>l);m++){for(let D=-m+f;D<=m-p;D+=2){const F=r+D;let _;D===-m||D!==m&&o[F-1]<o[F+1]?_=o[F+1]:_=o[F-1]+1;let E=_-D;for(;_<i&&E<s&&e.charAt(_)===n.charAt(E);)_++,E++;if(o[F]=_,_>i)p+=2;else if(E>s)f+=2;else if(u){const w=r+g-D;if(w>=0&&w<h&&a[w]!==-1){const A=i-a[w];if(_>=A)return this.diff_bisectSplit_(e,n,_,E,l)}}}for(let D=-m+b;D<=m-I;D+=2){const F=r+D;let _;D===-m||D!==m&&a[F-1]<a[F+1]?_=a[F+1]:_=a[F-1]+1;let E=_-D;for(;_<i&&E<s&&e.charAt(i-_-1)===n.charAt(s-E-1);)_++,E++;if(a[F]=_,_>i)I+=2;else if(E>s)b+=2;else if(!u){const w=r+g-D;if(w>=0&&w<h&&o[w]!==-1){const A=o[w],L=r+A-w;if(_=i-_,A>=_)return this.diff_bisectSplit_(e,n,A,L,l)}}}}return[new c.Diff(-1,e),new c.Diff(1,n)]},c.prototype.diff_bisectSplit_=function(e,n,l,i,s){const t=e.substring(0,l),r=n.substring(0,i),h=e.substring(l),o=n.substring(i),a=this.diff_main(t,r,!1,s),g=this.diff_main(h,o,!1,s);return a.concat(g)},c.prototype.diff_linesToChars_=function(e,n){const l=[],i={};l[0]="";function s(o){let a="",g=0,u=-1,f=l.length;for(;u<o.length-1;){u=o.indexOf(`
`,g),u===-1&&(u=o.length-1);let p=o.substring(g,u+1);(i.hasOwnProperty?Object.hasOwn(i,p):typeof i[p]<"u")?a+=String.fromCharCode(i[p]):(f===t&&(p=o.substring(g),u=o.length),a+=String.fromCharCode(f),i[p]=f,l[f++]=p),g=u+1}return a}let t=4e4;const r=s(e);t=65535;const h=s(n);return{chars1:r,chars2:h,lineArray:l}},c.prototype.diff_charsToLines_=function(e,n){for(let l=0;l<e.length;l++){const i=e[l][1],s=[];for(let t=0;t<i.length;t++)s[t]=n[i.charCodeAt(t)];e[l][1]=s.join("")}},c.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;let l=0,i=Math.min(e.length,n.length),s=i,t=0;for(;l<s;)e.substring(t,s)===n.substring(t,s)?(l=s,t=l):i=s,s=Math.floor((i-l)/2+l);return s},c.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;let l=0,i=Math.min(e.length,n.length),s=i,t=0;for(;l<s;)e.substring(e.length-s,e.length-t)===n.substring(n.length-s,n.length-t)?(l=s,t=l):i=s,s=Math.floor((i-l)/2+l);return s},c.prototype.diff_commonOverlap_=function(e,n){const l=e.length,i=n.length;if(l===0||i===0)return 0;l>i?e=e.substring(l-i):l<i&&(n=n.substring(0,l));const s=Math.min(l,i);if(e===n)return s;let t=0,r=1;for(;;){const h=e.substring(s-r),o=n.indexOf(h);if(o===-1)return t;r+=o,(o===0||e.substring(s-r)===n.substring(0,r))&&(t=r,r++)}},c.prototype.diff_halfMatch_=function(e,n){if(this.Diff_Timeout<=0)return null;const l=e.length>n.length?e:n,i=e.length>n.length?n:e;if(l.length<4||i.length*2<l.length)return null;const s=this;function t(b,I,m){const D=b.substring(m,m+Math.floor(b.length/4));let F=-1,_="",E,w,A,L;for(;(F=I.indexOf(D,F+1))!==-1;){const S=s.diff_commonPrefix(b.substring(m),I.substring(F)),y=s.diff_commonSuffix(b.substring(0,m),I.substring(0,F));_.length<y+S&&(_=I.substring(F-y,F)+I.substring(F,F+S),E=b.substring(0,m-y),w=b.substring(m+S),A=I.substring(0,F-y),L=I.substring(F+S))}return _.length*2>=b.length?[E,w,A,L,_]:null}const r=t(l,i,Math.ceil(l.length/4)),h=t(l,i,Math.ceil(l.length/2));let o;if(!r&&!h)return null;h?r?o=r[4].length>h[4].length?r:h:o=h:o=r;let a,g,u,f;e.length>n.length?(a=o[0],g=o[1],u=o[2],f=o[3]):(u=o[0],f=o[1],a=o[2],g=o[3]);const p=o[4];return[a,g,u,f,p]},c.prototype.diff_cleanupSemantic=function(e){let n=!1;const l=[];let i=0,s=null,t=0,r=0,h=0,o=0,a=0;for(;t<e.length;)e[t][0]===0?(l[i++]=t,r=o,h=a,o=0,a=0,s=e[t][1]):(e[t][0]===1?o+=e[t][1].length:a+=e[t][1].length,s&&s.length<=Math.max(r,h)&&s.length<=Math.max(o,a)&&(e.splice(l[i-1],0,new c.Diff(-1,s)),e[l[i-1]+1][0]=1,i--,i--,t=i>0?l[i-1]:-1,r=0,h=0,o=0,a=0,s=null,n=!0)),t++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),t=1;t<e.length;){if(e[t-1][0]===-1&&e[t][0]===1){const g=e[t-1][1],u=e[t][1],f=this.diff_commonOverlap_(g,u),p=this.diff_commonOverlap_(u,g);f>=p?(f>=g.length/2||f>=u.length/2)&&(e.splice(t,0,new c.Diff(0,u.substring(0,f))),e[t-1][1]=g.substring(0,g.length-f),e[t+1][1]=u.substring(f),t++):(p>=g.length/2||p>=u.length/2)&&(e.splice(t,0,new c.Diff(0,g.substring(0,p))),e[t-1][0]=1,e[t-1][1]=u.substring(0,u.length-p),e[t+1][0]=-1,e[t+1][1]=g.substring(p),t++),t++}t++}},c.prototype.diff_cleanupSemanticLossless=function(e){function n(i,s){if(!i||!s)return 6;const t=i.charAt(i.length-1),r=s.charAt(0),h=t.match(c.nonAlphaNumericRegex_),o=r.match(c.nonAlphaNumericRegex_),a=h&&t.match(c.whitespaceRegex_),g=o&&r.match(c.whitespaceRegex_),u=a&&t.match(c.linebreakRegex_),f=g&&r.match(c.linebreakRegex_),p=u&&i.match(c.blanklineEndRegex_),b=f&&s.match(c.blanklineStartRegex_);return p||b?5:u||f?4:h&&!a&&g?3:a||g?2:h||o?1:0}let l=1;for(;l<e.length-1;){if(e[l-1][0]===0&&e[l+1][0]===0){let i=e[l-1][1],s=e[l][1],t=e[l+1][1];const r=this.diff_commonSuffix(i,s);if(r){const u=s.substring(s.length-r);i=i.substring(0,i.length-r),s=u+s.substring(0,s.length-r),t=u+t}let h=i,o=s,a=t,g=n(i,s)+n(s,t);for(;s.charAt(0)===t.charAt(0);){i+=s.charAt(0),s=s.substring(1)+t.charAt(0),t=t.substring(1);const u=n(i,s)+n(s,t);u>=g&&(g=u,h=i,o=s,a=t)}e[l-1][1]!==h&&(h?e[l-1][1]=h:(e.splice(l-1,1),l--),e[l][1]=o,a?e[l+1][1]=a:(e.splice(l+1,1),l--))}l++}},c.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,c.whitespaceRegex_=/\s/,c.linebreakRegex_=/[\r\n]/,c.blanklineEndRegex_=/\n\r?\n$/,c.blanklineStartRegex_=/^\r?\n\r?\n/,c.prototype.diff_cleanupEfficiency=function(e){let n=!1;const l=[];let i=0,s=null,t=0,r=!1,h=!1,o=!1,a=!1;for(;t<e.length;)e[t][0]===0?(e[t][1].length<this.Diff_EditCost&&(o||a)?(l[i++]=t,r=o,h=a,s=e[t][1]):(i=0,s=null),o=a=!1):(e[t][0]===-1?a=!0:o=!0,s&&(r&&h&&o&&a||s.length<this.Diff_EditCost/2&&r+h+o+a===3)&&(e.splice(l[i-1],0,new c.Diff(-1,s)),e[l[i-1]+1][0]=1,i--,s=null,r&&h?(o=a=!0,i=0):(i--,t=i>0?l[i-1]:-1,o=a=!1),n=!0)),t++;n&&this.diff_cleanupMerge(e)},c.prototype.diff_cleanupMerge=function(e){e.push(new c.Diff(0,""));let n=0,l=0,i=0,s="",t="",r;for(;n<e.length;)switch(e[n][0]){case 1:i++,t+=e[n][1],n++;break;case-1:l++,s+=e[n][1],n++;break;case 0:l+i>1?(l!==0&&i!==0&&(r=this.diff_commonPrefix(t,s),r!==0&&(n-l-i>0&&e[n-l-i-1][0]===0?e[n-l-i-1][1]+=t.substring(0,r):(e.splice(0,0,new c.Diff(0,t.substring(0,r))),n++),t=t.substring(r),s=s.substring(r)),r=this.diff_commonSuffix(t,s),r!==0&&(e[n][1]=t.substring(t.length-r)+e[n][1],t=t.substring(0,t.length-r),s=s.substring(0,s.length-r))),n-=l+i,e.splice(n,l+i),s.length&&(e.splice(n,0,new c.Diff(-1,s)),n++),t.length&&(e.splice(n,0,new c.Diff(1,t)),n++),n++):n!==0&&e[n-1][0]===0?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,l=0,s="",t="";break}e[e.length-1][1]===""&&e.pop();let h=!1;for(n=1;n<e.length-1;)e[n-1][0]===0&&e[n+1][0]===0&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),h=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),h=!0)),n++;h&&this.diff_cleanupMerge(e)},c.prototype.diff_cleanupSplitSurrogates=function(e){let n;for(let l=0;l<e.length;l++){const i=e[l],s=i[1][0],t=i[1][i[1].length-1];if(i[1].length===0){e.splice(l--,1);continue}if(t&&this.isHighSurrogate(t)&&(n=t,i[1]=i[1].slice(0,-1)),n&&s&&this.isHighSurrogate(n)&&this.isLowSurrogate(s)&&(i[1]=n+i[1]),i[1].length===0){e.splice(l--,1);continue}}return e},c.prototype.isHighSurrogate=function(e){const n=e.charCodeAt(0);return n>=55296&&n<=56319},c.prototype.isLowSurrogate=function(e){const n=e.charCodeAt(0);return n>=56320&&n<=57343},c.prototype.diff_generateHtmlFragment=function(e){e=this.diff_cleanupSplitSurrogates(e);const n=document.createDocumentFragment();for(let l=0;l<e.length;l++){const i=e[l][0],s=e[l][1];let t;switch(i){case 1:t=document.createElement("ins");break;case-1:t=document.createElement("del");break;case 0:t=document.createElement("span");break}if(t){const r=s.split(`
`);for(let h=0;h<r.length;h++){if(h>0){const o=document.createElement("span");o.className="muted",o.textContent="\u21B5",t.appendChild(o),t.appendChild(document.createElement("br"))}t.appendChild(document.createTextNode(r[h]))}n.appendChild(t)}}return n},window.diff_match_patch=c})();
